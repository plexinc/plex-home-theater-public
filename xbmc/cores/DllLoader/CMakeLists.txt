add_subdirectory(exports)

find_all_sources(. dllloader_SRCS)
list(REMOVE_ITEM dllloader_SRCS ./DllLoader-linux.cpp)
if(UNIX)
  list(REMOVE_ITEM dllloader_SRCS ./Win32DllLoader.cpp)
  list(REMOVE_ITEM dllloader_SRCS ./Win32DllLoader.h)
else()
  list(REMOVE_ITEM dllloader_SRCS ./DllLoader-linux.cpp)
  list(REMOVE_ITEM dllloader_SRCS ./ldt_keeper.c)
  list(REMOVE_ITEM dllloader_SRCS ./mmap_anon.c)
  list(REMOVE_ITEM dllloader_SRCS ./SoLoader.cpp)
endif()
if(TARGET_FREEBSD)
  list(REMOVE_ITEM dllloader_SRCS ./ldt_keeper.c)
  list(REMOVE_ITEM dllloader_SRCS ./ldt_keeper.h)
endif()
add_sources(${dllloader_SRCS})
