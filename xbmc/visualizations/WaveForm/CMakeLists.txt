set(TARGET_NAME waveform)
if(TARGET_WIN32)
  set(TARGET_NAME waveform_win32)
endif(TARGET_WIN32)
if(TARGET_RPI)
  include_directories(
    ${root}/xbmc/visualizations/EGLHelpers
  )
  add_library(${TARGET_NAME} MODULE Main_gles.cpp)
else(TARGET_RPI)
  add_library(${TARGET_NAME} MODULE Main.cpp)
endif(TARGET_RPI)
if(TARGET_WIN32)
  target_link_libraries(${TARGET_NAME} OpenGL32)
else(TARGET_WIN32)
  target_link_libraries(${TARGET_NAME} ${CONFIG_LIBRARY_OPENGL})
endif(TARGET_WIN32)

if(TARGET_COMMON_DARWIN)
  set_target_properties(${TARGET_NAME} PROPERTIES LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/plex/${RESOURCEPATH}/addons/visualization.waveform)
else(TARGET_COMMON_DARWIN)
  install(TARGETS ${TARGET_NAME} LIBRARY DESTINATION ${RESOURCEPATH}/addons/visualization.waveform COMPONENT RUNTIME)
endif(TARGET_COMMON_DARWIN)
